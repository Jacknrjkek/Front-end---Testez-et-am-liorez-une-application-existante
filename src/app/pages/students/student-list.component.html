<div class="container mt-4">

  <!-- Bouton création -->
  <button class="btn btn-primary mb-3" (click)="openCreateModal()">
    Créer un étudiant
  </button>

  <!-- Tableau -->
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Prénom</th>
        <th>Nom</th>
        <th>Email</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let s of students">
        <td>{{ s.firstName }}</td>
        <td>{{ s.lastName }}</td>
        <td>{{ s.email }}</td>

        <td class="text-end">

          <!-- Bouton modifier -->
          <button class="btn btn-sm btn-warning mx-1" (click)="openEditModal(s)">
            Modifier
          </button>

          <!-- Bouton supprimer -->
          <button class="btn btn-sm btn-danger mx-1" (click)="delete(s.id!)">
            Supprimer
          </button>

        </td>
      </tr>
    </tbody>
  </table>


  <!-- ========= POPUP CREATION ========= -->
  <div class="modal fade" id="createModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Créer un étudiant</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <form [formGroup]="createForm" (ngSubmit)="submitCreate()">

          <div class="modal-body">

            <div class="mb-3">
              <label>Prénom</label>
              <input class="form-control" formControlName="firstName">
            </div>

            <div class="mb-3">
              <label>Nom</label>
              <input class="form-control" formControlName="lastName">
            </div>

            <div class="mb-3">
              <label>Email</label>
              <input class="form-control" formControlName="email">
            </div>

          </div>

          <div class="modal-footer">
            <button type="reset" class="btn btn-secondary">Effacer</button>
            <button type="submit" class="btn btn-primary">Valider</button>
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Retour</button>
          </div>

        </form>

      </div>
    </div>
  </div>



  <!-- ========= POPUP MODIFICATION ========= -->
  <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Modifier l’étudiant</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <form [formGroup]="editForm" (ngSubmit)="submitUpdate()">

          <div class="modal-body">

            <div class="mb-3">
              <label>Prénom</label>
              <input class="form-control" formControlName="firstName">
            </div>

            <div class="mb-3">
              <label>Nom</label>
              <input class="form-control" formControlName="lastName">
            </div>

            <div class="mb-3">
              <label>Email</label>
              <input class="form-control" formControlName="email">
            </div>

          </div>

          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Mettre à jour</button>
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Retour</button>
          </div>

        </form>

      </div>
    </div>
  </div>

</div>
